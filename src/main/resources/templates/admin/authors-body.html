<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<th:block th:fragment="body">
    <!-- Search Section -->
    <div class="search-section">
        <p>G√µ l√† ra k·∫øt qu·∫£ ngay. T√¨m ki·∫øm theo: t√™n t√°c gi·∫£.</p>
        <div class="search-controls">
            <input type="text" class="search-input" id="searchInput" placeholder="Nh·∫≠p t·ª´ kh√≥a ƒë·ªÉ t√¨m t√°c gi·∫£...">
            <button class="btn btn-secondary" onclick="document.getElementById('searchInput').value=''; AdminAuthor.initSearch(); AdminAuthor.updateCount();">X√≥a l·ªçc</button>
            <button class="btn btn-success" onclick="AdminAuthor.openAddModal()">+ Th√™m t√°c gi·∫£ m·ªõi</button>
        </div>
    </div>

    <!-- Authors Table -->
    <div class="authors-section">
        <div class="section-header">
            <h2>Danh s√°ch t√°c gi·∫£</h2>
            <span class="total-count">T·ªïng: <strong id="authorCount" th:text="${#lists.size(authors)}">0</strong> t√°c gi·∫£</span>
        </div>

        <div class="table-wrapper">
            <table id="authorsTable">
                <thead>
                    <tr>
                        <th style="width: 80px">M√£</th>
                        <th>T√™n t√°c gi·∫£</th>
                        <th style="width: 200px; text-align: center">Thao t√°c</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="author : ${authors}" th:data-search="${author.authorId + ' ' + author.name}">
                        <td th:text="${author.authorId}">1</td>
                        <td>
                            <strong th:text="${author.name}">Nguy·ªÖn Nh·∫≠t √Ånh</strong>
                        </td>
                        <td style="text-align: center">
                            <div class="action-buttons" style="justify-content: center">
                                <button class="btn btn-primary btn-sm" 
                                        th:data-id="${author.authorId}"
                                        onclick="AdminAuthor.openEditModal(this.dataset.id)"
                                        title="Ch·ªânh s·ª≠a">
                                    ‚úèÔ∏è S·ª≠a
                                </button>
                                <button class="btn btn-danger btn-sm" 
                                        th:data-id="${author.authorId}"
                                        th:data-name="${author.name}"
                                        onclick="AdminAuthor.deleteAuthor(this.dataset.id, this.dataset.name)"
                                        title="X√≥a">
                                    üóëÔ∏è X√≥a
                                </button>
                            </div>
                            
                            <!-- Hidden delete form -->
                            <form th:id="'deleteForm_' + ${author.authorId}" 
                                  th:action="@{/admin/authors/delete/{id}(id=${author.authorId})}" 
                                  method="post" 
                                  style="display:none">
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Add/Edit Modal -->
    <div id="authorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Th√™m T√°c gi·∫£ M·ªõi</h2>
                <button type="button" class="close-btn" onclick="AdminAuthor.closeModal()">&times;</button>
            </div>

            <form id="authorForm" th:action="@{/admin/authors/save}" method="post">
                <input type="hidden" id="authorId" name="authorId">

                <div class="form-group">
                    <label for="name">T√™n t√°c gi·∫£ <span style="color:red">*</span></label>
                    <input type="text" 
                           id="name" 
                           name="name" 
                           required
                           placeholder="Nh·∫≠p t√™n t√°c gi·∫£">
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="AdminAuthor.closeModal()">
                        H·ªßy
                    </button>
                    <button type="submit" class="btn btn-primary">
                        üíæ L∆∞u
                    </button>
                </div>
            </form>
        </div>
    </div>
</th:block>

</html>
