<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<th:block th:fragment="body">
    <!-- Search Section -->
    <div class="search-section">
        <p>G√µ l√† ra k·∫øt qu·∫£ ngay. T√¨m ki·∫øm theo: t√™n nh√† xu·∫•t b·∫£n.</p>
        <div class="search-controls">
            <input type="text" class="search-input" id="searchInput" placeholder="Nh·∫≠p t·ª´ kh√≥a ƒë·ªÉ t√¨m nh√† xu·∫•t b·∫£n...">
            <button class="btn btn-secondary" onclick="document.getElementById('searchInput').value=''; AdminPublisher.initSearch(); AdminPublisher.updateCount();">X√≥a l·ªçc</button>
            <button class="btn btn-success" onclick="AdminPublisher.openAddModal()">+ Th√™m nh√† xu·∫•t b·∫£n m·ªõi</button>
        </div>
    </div>

    <!-- Publishers Table -->
    <div class="publishers-section">
        <div class="section-header">
            <h2>Danh s√°ch nh√† xu·∫•t b·∫£n</h2>
            <span class="total-count">T·ªïng: <strong id="publisherCount" th:text="${#lists.size(publishers)}">0</strong> nh√† xu·∫•t b·∫£n</span>
        </div>

        <div class="table-wrapper">
            <table id="publishersTable">
                <thead>
                    <tr>
                        <th style="width: 80px">M√£</th>
                        <th>T√™n nh√† xu·∫•t b·∫£n</th>
                        <th style="width: 200px; text-align: center">Thao t√°c</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="publisher : ${publishers}" th:data-search="${publisher.publisherId + ' ' + publisher.name}">
                        <td th:text="${publisher.publisherId}">1</td>
                        <td>
                            <strong th:text="${publisher.name}">Nh√† xu·∫•t b·∫£n A</strong>
                        </td>
                        <td style="text-align: center">
                            <div class="action-buttons" style="justify-content: center">
                                <button class="btn btn-primary btn-sm" 
                                        th:data-id="${publisher.publisherId}"
                                        onclick="AdminPublisher.openEditModal(this.dataset.id)"
                                        title="Ch·ªânh s·ª≠a">
                                    ‚úèÔ∏è S·ª≠a
                                </button>
                                <button class="btn btn-danger btn-sm" 
                                        th:data-id="${publisher.publisherId}"
                                        th:data-name="${publisher.name}"
                                        onclick="AdminPublisher.deletePublisher(this.dataset.id, this.dataset.name)"
                                        title="X√≥a">
                                    üóëÔ∏è X√≥a
                                </button>
                            </div>
                            
                            <!-- Hidden delete form -->
                            <form th:id="'deleteForm_' + ${publisher.publisherId}" 
                                  th:action="@{/admin/publishers/delete/{id}(id=${publisher.publisherId})}" 
                                  method="post" 
                                  style="display:none">
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Add/Edit Modal -->
    <div id="publisherModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Th√™m Nh√† xu·∫•t b·∫£n M·ªõi</h2>
                <button type="button" class="close-btn" onclick="AdminPublisher.closeModal()">&times;</button>
            </div>

            <form id="publisherForm" th:action="@{/admin/publishers/save}" method="post">
                <input type="hidden" id="publisherId" name="publisherId">

                <div class="form-group">
                    <label for="name">T√™n nh√† xu·∫•t b·∫£n <span style="color:red">*</span></label>
                    <input type="text" 
                           id="name" 
                           name="name" 
                           required
                           placeholder="Nh·∫≠p t√™n nh√† xu·∫•t b·∫£n">
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="AdminPublisher.closeModal()">
                        H·ªßy
                    </button>
                    <button type="submit" class="btn btn-primary">
                        üíæ L∆∞u
                    </button>
                </div>
            </form>
        </div>
    </div>
</th:block>

</html>
