<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<th:block th:fragment="body">
    <!-- Search Section -->
    <div class="search-section">
        <p>G√µ l√† ra k·∫øt qu·∫£ ngay. T√¨m ki·∫øm theo: t√™n nh√† cung c·∫•p.</p>
        <div class="search-controls">
            <input type="text" class="search-input" id="searchInput" placeholder="Nh·∫≠p t·ª´ kh√≥a ƒë·ªÉ t√¨m nh√† cung c·∫•p...">
            <button class="btn btn-secondary" onclick="document.getElementById('searchInput').value=''; AdminSupplier.initSearch(); AdminSupplier.updateCount();">X√≥a l·ªçc</button>
            <button class="btn btn-success" onclick="AdminSupplier.openAddModal()">+ Th√™m nh√† cung c·∫•p m·ªõi</button>
        </div>
    </div>

    <!-- Suppliers Table -->
    <div class="suppliers-section">
        <div class="section-header">
            <h2>Danh s√°ch nh√† cung c·∫•p</h2>
            <span class="total-count">T·ªïng: <strong id="supplierCount" th:text="${#lists.size(suppliers)}">0</strong> nh√† cung c·∫•p</span>
        </div>

        <div class="table-wrapper">
            <table id="suppliersTable">
                <thead>
                    <tr>
                        <th style="width: 80px">M√£</th>
                        <th>T√™n nh√† cung c·∫•p</th>
                        <th style="width: 200px; text-align: center">Thao t√°c</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="supplier : ${suppliers}" th:data-search="${supplier.supplierId + ' ' + supplier.name}">
                        <td th:text="${supplier.supplierId}">1</td>
                        <td>
                            <strong th:text="${supplier.name}">Nh√† cung c·∫•p A</strong>
                        </td>
                        <td style="text-align: center">
                            <div class="action-buttons" style="justify-content: center">
                                <button class="btn btn-primary btn-sm" 
                                        th:data-id="${supplier.supplierId}"
                                        onclick="AdminSupplier.openEditModal(this.dataset.id)"
                                        title="Ch·ªânh s·ª≠a">
                                    ‚úèÔ∏è S·ª≠a
                                </button>
                                <button class="btn btn-danger btn-sm" 
                                        th:data-id="${supplier.supplierId}"
                                        th:data-name="${supplier.name}"
                                        onclick="AdminSupplier.deleteSupplier(this.dataset.id, this.dataset.name)"
                                        title="X√≥a">
                                    üóëÔ∏è X√≥a
                                </button>
                            </div>
                            
                            <!-- Hidden delete form -->
                            <form th:id="'deleteForm_' + ${supplier.supplierId}" 
                                  th:action="@{/admin/suppliers/delete/{id}(id=${supplier.supplierId})}" 
                                  method="post" 
                                  style="display:none">
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Add/Edit Modal -->
    <div id="supplierModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Th√™m Nh√† cung c·∫•p M·ªõi</h2>
                <button type="button" class="close-btn" onclick="AdminSupplier.closeModal()">&times;</button>
            </div>

            <form id="supplierForm" th:action="@{/admin/suppliers/save}" method="post">
                <input type="hidden" id="supplierId" name="supplierId">

                <div class="form-group">
                    <label for="name">T√™n nh√† cung c·∫•p <span style="color:red">*</span></label>
                    <input type="text" 
                           id="name" 
                           name="name" 
                           required
                           placeholder="Nh·∫≠p t√™n nh√† cung c·∫•p">
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="AdminSupplier.closeModal()">
                        H·ªßy
                    </button>
                    <button type="submit" class="btn btn-primary">
                        üíæ L∆∞u
                    </button>
                </div>
            </form>
        </div>
    </div>
</th:block>

</html>
