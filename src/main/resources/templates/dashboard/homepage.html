<!--<!doctype html>-->
<!--<html lang="vi" xmlns:th="http://www.thymeleaf.org">-->
<!--<head><meta charset="UTF-8"><title>Customer</title></head>-->
<!--<body>-->
<!--<h2 th:text="'Xin ch√†o CUSTOMER, ' + ${user.fullName} + '!'"></h2>-->
<!--<p th:text="'Email: ' + ${user.email}"></p>-->
<!--<a th:href="@{/logout}">ƒêƒÉng xu·∫•t</a>-->
<!--</body>-->
<!--</html>-->


<!doctype html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang ch·ªß</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .header { background: white; padding: 15px; margin-bottom: 20px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; }
        .alert { padding: 12px; margin: 10px 0; border-radius: 4px; }
        .alert-success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .alert-danger { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
        .product-card { background: white; border-radius: 8px; padding: 15px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .product-card img { width: 100%; height: 200px; object-fit: cover; border-radius: 4px; }
        .product-card h4 { margin: 10px 0; min-height: 48px; }
        .product-card .price { color: #dc3545; font-size: 20px; font-weight: bold; margin: 10px 0; }
        .product-card .stock { color: #666; font-size: 14px; margin: 5px 0; }
        .product-card .out-of-stock { color: #d00; font-weight: bold; }
        .product-card form { margin-top: 10px; }
        input[type="number"] { width: 60px; padding: 5px; margin-right: 5px; border: 1px solid #ddd; border-radius: 4px; }
        button { padding: 8px 16px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        button:disabled { background: #ccc; cursor: not-allowed; }
        a { color: #007bff; text-decoration: none; }
        a:hover { text-decoration: underline; }
        .empty-message { text-align: center; padding: 40px; color: #999; background: white; border-radius: 8px; }
    </style>
</head>
<body>
<div class="header">
    <h2>Xin ch√†o, <span th:text="${user.fullName}"></span>!</h2>
    <div>
        <a href="/cart">üõí Gi·ªè h√†ng</a> | <a href="/logout">ƒêƒÉng xu·∫•t</a>
    </div>
</div>

<div th:if="${successMessage}" class="alert alert-success" th:text="${successMessage}"></div>
<div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}"></div>

<h3>Danh s√°ch s·∫£n ph·∫©m</h3>

<div th:if="${products.isEmpty()}" class="empty-message">
    <h3>Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o</h3>
</div>

<div class="product-grid">
    <div class="product-card" th:each="product : ${products}">
        <img th:src="${product.imageUrl}" th:alt="${product.name}" onerror="this.src='https://via.placeholder.com/200'"/>
        <h4 th:text="${product.name}"></h4>
        <p class="price" th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT')} + 'ƒë'"></p>

        <p class="stock" th:if="${product.status.name() == 'ACTIVE'}">
            C√≤n: <span th:text="${product.stock}"></span> cu·ªën
        </p><p class="out-of-stock" th:if="${product.status.name() == 'OUT_OF_STOCK'}">
        H·∫øt h√†ng
    </p>

        <form th:action="@{/cart/add}" method="post">
            <input type="hidden" name="productId" th:value="${product.productId}"/>
            <input type="number" name="quantity" value="1" min="1"
                   th:max="${product.stock}"
                   th:disabled="${product.status.name() == 'OUT_OF_STOCK'}"/>
            <button type="submit" th:disabled="${product.status.name() == 'OUT_OF_STOCK'}">
                <span th:if="${product.status.name() == 'ACTIVE'}">Th√™m v√†o gi·ªè</span>
                <span th:if="${product.status.name() == 'OUT_OF_STOCK'}">H·∫øt h√†ng</span>
            </button>
        </form>
    </div>
</div>
</body>
</html>


