<!-- templates/fragments/chat-widget.html -->
<div th:fragment="chatWidget">

    <div id="chatWidget" class="chat-widget">
        <button id="chatToggle" class="chat-toggle">ðŸ’¬</button>

        <div id="chatBox" class="chat-box hidden">
            <div class="chat-header">
                <div>Há»— trá»£: <span id="chatStaffName">...</span></div>
                <button id="chatClose" class="chat-close">âœ•</button>
            </div>


            <div id="chatMessages" class="chat-messages"></div>

            <div class="chat-input">
                <input id="chatText" type="text" placeholder="Nháº­p tin nháº¯n..." autocomplete="off"/>
                <button id="chatSend">Gá»­i</button>
            </div>
        </div>
    </div>

    <style>
        .chat-widget { position: fixed; right: 18px; bottom: 18px; z-index: 9999; font-family: Arial, sans-serif; }
        .chat-toggle { width: 52px; height: 52px; border-radius: 50%; border: none; cursor: pointer; font-size: 20px; }
        .chat-box { width: 340px; height: 480px; background: #fff; border: 1px solid #ddd; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,.15); display: flex; flex-direction: column; overflow: hidden; margin-bottom: 10px; }
        .hidden { display: none; }
        .chat-header { padding: 10px 12px; background: #f6f6f6; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
        .chat-close { border: none; background: transparent; cursor: pointer; font-size: 18px; }
        .chat-messages { flex: 1; padding: 10px; overflow-y: auto; background: #fafafa; }
        .msg-row { display: flex; margin: 6px 0; }
        .msg-me { justify-content: flex-end; }
        .msg-other { justify-content: flex-start; }
        .bubble { max-width: 75%; padding: 8px 10px; border-radius: 12px; background: #e9e9e9; white-space: pre-wrap; word-break: break-word; }
        .bubble.me { background: #cfe8ff; }
        .meta { font-size: 11px; color: #888; margin-top: 3px; }
        .chat-input { padding: 10px; border-top: 1px solid #eee; display: flex; gap: 8px; }
        .chat-input input { flex: 1; padding: 9px 10px; border: 1px solid #ddd; border-radius: 10px; }
        .chat-input button { padding: 9px 12px; border: none; border-radius: 10px; cursor: pointer; }
    </style>

</div>
