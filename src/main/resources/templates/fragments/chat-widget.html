<!-- templates/fragments/chat-widget.html -->
<div th:fragment="chatWidget">

    <div id="chatWidget" class="chat-widget">
        <button id="chatToggle" class="chat-toggle">üí¨</button>

        <div id="chatBox" class="chat-box hidden">
            <div class="chat-header">
                <div class="support-staff">H·ªó tr·ª£: <span id="chatStaffName">...</span></div>
                <button id="chatClose" class="chat-close">‚úï</button>
            </div>


            <div id="chatMessages" class="chat-messages"></div>

            <div class="chat-input">
                <input id="chatText" type="text" placeholder="Nh·∫≠p tin nh·∫Øn..." autocomplete="off"/>
                <button id="chatSend">G·ª≠i</button>
            </div>
        </div>
    </div>

    <style>
        .chat-widget { position: fixed; right: 96px; bottom: 24px; z-index: 1000; font-family: Arial, sans-serif; }
        .chat-toggle { width: 60px; height: 60px; border-radius: 50%; border: none; cursor: pointer; font-size: 24px;  display: flex;
            align-items: center;
            justify-content: center;}
        .chat-box{
            position: fixed;
            right: 24px;      /* ‚úÖ cho khung canh theo g√≥c ph·∫£i */
            bottom: 24px;     /* ‚úÖ ƒë√® l√™n v√πng bong b√≥ng */
            width: 340px;
            height: 480px;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,.15);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            z-index: 2000;    /* ‚úÖ khung cao h∆°n bong b√≥ng */
            margin-bottom: 0; /* b·ªè margin c≈© */
        }
        .hidden { display: none; }
        .chat-header { padding: 10px 12px; background: #f6f6f6; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
        .chat-close { border: none; background: transparent; cursor: pointer; font-size: 18px; }
        .chat-messages { flex: 1; padding: 10px; overflow-y: auto; background: #fafafa; }
        .chat-input { padding: 10px; border-top: 1px solid #eee; display: flex; gap: 8px; }
        .chat-input input { flex: 1; padding: 9px 10px; border: 1px solid #ddd; border-radius: 10px; }
        .chat-input button { padding: 9px 12px; border: none; border-radius: 10px; cursor: pointer; }
        .chat-toggle{
            background: cornflowerblue;
        }
        .chat-close{
            color: black;
        }
        #chatStaffName {
            color: #000;

        }
        .support-staff {
            color: black;
        }
        #chatBox #chatMessages {
            display: flex;
            flex-direction: column;
        }

        #chatBox .msg-row {
            display: flex !important;
            width: 100%;
            margin: 6px 0;
        }

        #chatBox .msg-row.msg-me {
            justify-content: flex-end !important;
        }

        #chatBox .msg-row.msg-other {
            justify-content: flex-start !important;
        }

        #chatBox .bubble {
            max-width: 75%;
            padding: 8px 10px;
            border-radius: 12px;
            background: #fff;
            border: 1px solid #e6e6e6;
            word-break: break-word;
        }

        /* bubble c·ªßa m√¨nh */
        #chatBox .bubble.me {
            margin-left: auto !important;
            background: #CFE8FF;
            color: black;
            border-color: transparent;
        }



        /* link/file cho ƒë·∫πp */
        #chatBox .bubble a { color: inherit; }
    </style>

</div>
